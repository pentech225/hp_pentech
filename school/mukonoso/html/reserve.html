<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç„¡æ–™ä½“é¨“äºˆç´„ | iTeen æ­¦åº«ä¹‹è˜æ ¡</title>
    
    <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿è­· -->
    <script src="config.js"></script>
    <script src="password-check.js"></script>
    <style>
        :root {
            --primary: #4A90E2;
            --accent: #F5A623;
            --text: #333333;
            --bg: #FAFAFA;
            --white: #FFFFFF;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        .container {
            padding: 0 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--white);
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 100%;
        }
        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .header-brand {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .header-logo {
            max-height: 50px;
            width: auto;
        }
        .header-brand > a:first-child {
            text-decoration: none;
            display: inline-block;
            transition: opacity 0.2s;
        }
        .header-brand > a:first-child:hover {
            opacity: 0.8;
        }
        .header-school-name {
            font-size: 1.2rem;
            color: var(--text);
            font-weight: normal;
            white-space: nowrap;
        }
        .header-phone {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
            white-space: nowrap;
        }
        .header-phone:hover {
            text-decoration: underline;
        }
        .header-line-button {
            background-color: #06C755;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            white-space: nowrap;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .header-line-button:hover {
            background-color: #05B04A;
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
        }
        .header-nav {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            width: 100%;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        .header-nav a {
            color: var(--text);
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .header-nav a:hover {
            color: var(--primary);
            background-color: #f0f8ff;
        }
        
        /* äºˆç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .reservation-section {
            padding: 50px 0;
            background: linear-gradient(150deg, #e0f2ff 0%, var(--white) 100%);
        }
        .reservation-title {
            text-align: center;
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 10px;
        }
        .reservation-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }
        .reservation-form {
            background: var(--white);
            border-radius: 15px;
            padding: 30px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-top: 20px;
        }
        .form-instruction {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: var(--text);
            text-align: center;
        }
        .calendar-container {
            background-color: var(--white);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            min-width: 0;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .month-year {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text);
        }
        .calendar-nav {
            display: flex;
            gap: 8px;
        }
        .nav-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .nav-button:hover {
            background-color: #357ABD;
        }
        .nav-button:disabled {
            background-color: #CCCCCC;
            cursor: not-allowed;
        }
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, minmax(0, 1fr));
            gap: 5px;
            margin-bottom: 10px;
        }
        .weekday-header {
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
            color: var(--text);
            padding: 8px 0;
            min-width: 0;
            overflow: hidden;
        }
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, minmax(0, 1fr));
            gap: 5px;
        }
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            padding: 5px;
            background-color: var(--white);
            min-width: 0;
            box-sizing: border-box;
        }
        .calendar-day.other-month {
            opacity: 0.3;
            cursor: not-allowed;
        }
        .calendar-day.past {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .calendar-day.selectable {
            cursor: pointer;
        }
        .calendar-day.selectable:hover {
            border-color: var(--primary);
            background-color: #F0F7FF;
            transform: scale(1.05);
        }
        .calendar-day.selected {
            border-color: var(--primary);
            background-color: var(--primary);
            color: white;
            font-weight: bold;
        }
        .calendar-day.today {
            border-color: var(--accent);
        }
        .day-number {
            font-size: 0.9rem;
            margin-bottom: 3px;
        }
        .day-symbol {
            font-size: 1.2rem;
            font-weight: bold;
        }
        .calendar-day.selected .day-symbol {
            color: white;
        }
        .symbol-circle { color: #4CAF50; }
        .symbol-triangle { color: #FF9800; }
        .symbol-cross { color: #F44336; }
        .date-section {
            background-color: var(--white);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: none;
        }
        .date-section.show {
            display: block;
        }
        .date-title {
            font-size: 0.95rem;
            font-weight: bold;
            color: var(--text);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .date-title .today-badge {
            background-color: var(--accent);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: normal;
        }
        .time-slots {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
        }
        .time-slot {
            background-color: var(--white);
            border: 2px solid #E0E0E0;
            border-radius: 6px;
            padding: 8px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            color: var(--text);
        }
        .time-slot.available:hover {
            border-color: var(--primary);
            background-color: #F0F7FF;
        }
        .time-slot.selected {
            border-color: var(--primary);
            background-color: var(--primary);
            color: white;
            font-weight: bold;
        }
        .time-slot.unavailable {
            background-color: #F5F5F5;
            border-color: #CCCCCC;
            color: #CCCCCC;
            cursor: not-allowed;
            opacity: 0.6;
        }
        .time-slot-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.8rem;
        }
        .time-slot.available .time-slot-icon {
            color: var(--primary);
        }
        .time-slot.unavailable .time-slot-icon {
            color: #CCCCCC;
        }
        .time-slot.selected .time-slot-icon {
            color: white;
        }
        .submit-section {
            background-color: var(--white);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
        }
        .selected-info {
            margin-top: 15px;
            padding: 10px;
            background-color: #F0F7FF;
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--primary);
            display: none;
            white-space: pre-line;
            line-height: 1.6;
        }
        .selected-info.show {
            display: block;
        }
        .submit-button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            max-width: 400px;
        }
        .submit-button:hover {
            background-color: #E0951A;
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
        }
        .submit-button:disabled {
            background-color: #CCCCCC;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .profile-section {
            background-color: var(--white);
            padding: 15px;
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .profile-image {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            background-color: #E0E0E0;
        }
        .profile-message {
            flex: 1;
            font-size: 0.9rem;
            color: var(--text);
            line-height: 1.5;
        }
        .school-type-selection-section {
            background-color: var(--white);
            padding: 30px 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        .school-type-selection-title {
            text-align: center;
            font-size: 1.2rem;
            color: var(--text);
            margin-bottom: 20px;
            font-weight: bold;
        }
        .school-type-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        .school-type-button {
            background-color: var(--white);
            border: 2px solid var(--primary);
            border-radius: 8px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1rem;
            color: var(--text);
            font-weight: 500;
        }
        .school-type-button:hover {
            background-color: #F0F7FF;
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        .school-type-button.selected {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
            font-weight: bold;
        }
        .grade-selection-section {
            background-color: var(--white);
            padding: 30px 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
            display: none;
        }
        .grade-selection-section.show {
            display: block;
        }
        .grade-selection-title {
            text-align: center;
            font-size: 1.2rem;
            color: var(--text);
            margin-bottom: 20px;
            font-weight: bold;
        }
        .grade-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        .grade-button {
            background-color: var(--white);
            border: 2px solid var(--primary);
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            color: var(--text);
            font-weight: 500;
        }
        .grade-button:hover {
            background-color: #F0F7FF;
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        .grade-button.selected {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
            font-weight: bold;
        }
        .calendar-container {
            display: none;
        }
        .calendar-container.show {
            display: block;
        }
        .date-sections-container {
            display: none;
        }
        .date-sections-container.show {
            display: block;
        }
        .child-name-section {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .child-name-section.show {
            display: block;
        }
        .child-name-notice {
            background-color: #f0f8ff;
            border-left: 4px solid var(--primary);
            padding: 12px 15px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 0.9rem;
            color: #666;
            line-height: 1.6;
        }
        .child-name-label {
            font-size: 1rem;
            font-weight: bold;
            color: var(--text);
            margin-bottom: 10px;
            display: block;
        }
        .child-name-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            font-size: 1rem;
            color: var(--text);
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        .child-name-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .child-name-input::placeholder {
            color: #999;
        }
        .phone-section {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .phone-section.show {
            display: block;
        }
        .phone-label {
            font-size: 1rem;
            font-weight: bold;
            color: var(--text);
            margin-bottom: 10px;
            display: block;
        }
        .phone-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            font-size: 1rem;
            color: var(--text);
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        .phone-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .phone-input::placeholder {
            color: #999;
        }
        .phone-input.error {
            border-color: #F44336;
            background-color: #ffebee;
        }
        .phone-error-message {
            margin-top: 8px;
            padding: 8px 12px;
            background-color: #ffebee;
            border-left: 4px solid #F44336;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #c62828;
            display: none;
        }
        .phone-error-message.show {
            display: block;
        }
        .email-section {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .email-section.show {
            display: block;
        }
        .email-label {
            font-size: 1rem;
            font-weight: bold;
            color: var(--text);
            margin-bottom: 10px;
            display: block;
        }
        .email-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            font-size: 1rem;
            color: var(--text);
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        .email-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .email-input::placeholder {
            color: #999;
        }
        .email-input.error {
            border-color: #F44336;
            background-color: #ffebee;
        }
        .email-error-message {
            margin-top: 8px;
            padding: 8px 12px;
            background-color: #ffebee;
            border-left: 4px solid #F44336;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #c62828;
            display: none;
        }
        .email-error-message.show {
            display: block;
        }
        .message-section {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .message-section.show {
            display: block;
        }
        .message-label {
            font-size: 1rem;
            font-weight: bold;
            color: var(--text);
            margin-bottom: 10px;
            display: block;
        }
        .message-label .optional {
            color: #999;
            font-size: 0.85rem;
            font-weight: normal;
            margin-left: 4px;
        }
        .message-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            font-size: 1rem;
            color: var(--text);
            box-sizing: border-box;
            transition: border-color 0.2s;
            font-family: inherit;
            min-height: 100px;
            resize: vertical;
        }
        .message-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        .message-textarea::placeholder {
            color: #999;
        }
        .submit-section {
            display: none;
        }
        .submit-section.show {
            display: block;
        }
        footer {
            padding: 20px;
            text-align: center;
            background: #444;
            color: white;
            font-size: 0.8rem;
            margin-top: 40px;
        }
        footer a {
            color: white;
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }
        
        /* æ„Ÿè¬ãƒšãƒ¼ã‚¸ */
        .thank-you-section {
            display: none;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            position: relative;
        }
        .thank-you-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 100%;
            color: var(--text);
        }
        .thank-you-header .header-top,
        .thank-you-header .header-brand,
        .thank-you-header .header-logo,
        .thank-you-header .header-school-name,
        .thank-you-header .header-phone,
        .thank-you-header .header-line-button,
        .thank-you-header .header-nav,
        .thank-you-header .header-nav a {
            color: var(--text);
        }
        .thank-you-header .header-phone {
            color: var(--primary);
        }
        .thank-you-footer {
            padding: 20px;
            text-align: center;
            background: rgba(68, 68, 68, 0.8);
            color: white;
            font-size: 0.8rem;
            margin-top: 40px;
        }
        .thank-you-footer a {
            color: white;
            text-decoration: none;
        }
        .thank-you-footer a:hover {
            text-decoration: underline;
        }
        .thank-you-section.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .thank-you-container {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            padding: 50px 20px;
        }
        .thank-you-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 1s ease-in-out infinite;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        .thank-you-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .thank-you-subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.95;
        }
        .reservation-info-box {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        .reservation-info-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fff8e1;
        }
        .reservation-info-item {
            font-size: 1rem;
            margin-bottom: 10px;
            text-align: left;
            padding-left: 20px;
            position: relative;
        }
        .reservation-info-item:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #4CAF50;
            font-weight: bold;
        }
        .expectation-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px 20px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .expectation-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #fff8e1;
        }
        .expectation-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            text-align: left;
        }
        .expectation-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }
        .expectation-content {
            flex: 1;
        }
        .expectation-content h4 {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: #fff8e1;
        }
        .expectation-content p {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.95;
        }
        .next-steps {
            background: rgba(255, 248, 225, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 248, 225, 0.4);
        }
        .next-steps-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fff8e1;
        }
        .next-steps-list {
            text-align: left;
            padding-left: 20px;
        }
        .next-steps-list li {
            margin-bottom: 10px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .thank-you-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }
        .thank-you-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        .thank-you-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .thank-you-button.secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
        }
        .thank-you-button.secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .header-brand {
                width: 100%;
                justify-content: space-between;
            }
            .header-nav {
                gap: 10px;
            }
            .header-nav a {
                font-size: 0.85rem;
                padding: 5px 8px;
            }
            .time-slots {
                grid-template-columns: 1fr;
            }
            .calendar-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .calendar-nav {
                width: 100%;
                justify-content: space-between;
            }
            .calendar-weekdays {
                gap: 3px;
            }
            .calendar-days {
                gap: 3px;
            }
            .calendar-day {
                padding: 3px;
            }
            .day-number {
                font-size: 0.8rem;
            }
            .day-symbol {
                font-size: 1rem;
            }
            .weekday-header {
                font-size: 0.8rem;
                padding: 6px 0;
            }
            .grade-buttons {
                grid-template-columns: 1fr;
            }
            .school-type-buttons {
                grid-template-columns: 1fr;
            }
            .thank-you-title {
                font-size: 1.5rem;
            }
            .thank-you-subtitle {
                font-size: 1rem;
            }
            .thank-you-icon {
                font-size: 4rem;
            }
            .expectation-title {
                font-size: 1.2rem;
            }
            .expectation-item {
                flex-direction: column;
                text-align: center;
            }
            .expectation-content {
                text-align: center;
            }
            .thank-you-actions {
                gap: 10px;
            }
            .thank-you-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-top">
            <div class="header-brand">
                <a href="../index.html"><img src="../images/iteen_logo.png" alt="iTeen ãƒ­ã‚´" class="header-logo"></a>
                <div class="header-school-name">æ­¦åº«ä¹‹è˜æ ¡</div>
                <a href="tel:" class="header-phone" id="header-phone-link">â˜</a>
            </div>
            <a href="https://page.line.me/555qxcak?oat_content=url&openQrModal=true" target="_blank" rel="noopener noreferrer" class="header-line-button">
                ğŸ’¬ LINEã§è³ªå•
            </a>
        </div>
        <nav class="header-nav">
            <a href="../index.html">ãƒ›ãƒ¼ãƒ </a>
            <a href="../index.html#news">ãƒ‹ãƒ¥ãƒ¼ã‚¹</a>
            <a href="../index.html#courses">ã‚³ãƒ¼ã‚¹</a>
            <a href="../index.html#teachers">è¬›å¸«</a>
            <a href="values.html">å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨</a>
            <a href="../index.html#fee">æ–™é‡‘</a>
            <a href="../index.html#faq">ã‚ˆãã‚ã‚‹è³ªå•</a>
            <a href="../index.html#access">ã‚¢ã‚¯ã‚»ã‚¹</a>
            <a href="../index.html#contact">ãŠå•ã„åˆã‚ã›</a>
        </nav>
    </header>

    <section class="reservation-section">
        <div class="container">
            <h2 class="reservation-title">ğŸ“‹ ç„¡æ–™ä½“é¨“äºˆç´„</h2>
            
            <!-- ãƒãƒ¼ãƒ‰ãƒ«ã‚’ä¸‹ã’ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
            <div style="background: linear-gradient(135deg, #fff8e1 0%, #fff3e0 100%); border-radius: 15px; padding: 25px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); text-align: center; border: 3px solid var(--accent);">
                <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px;">
                    <p style="font-size: 1rem; margin: 0;"><strong>âœ… æ‰‹ã¶ã‚‰ã§OK</strong> - ç­†è¨˜ç”¨å…·ã‚„PCã¯æ•™å®¤ã§ç”¨æ„ã—ã¾ã™</p>
                    <p style="font-size: 1rem; margin: 0;"><strong>âœ… å½“æ—¥äºˆç´„OK</strong> - ç©ºããŒã‚ã‚Œã°å½“æ—¥ã§ã‚‚äºˆç´„å¯èƒ½ã§ã™</p>
                    <p style="font-size: 1rem; margin: 0;"><strong>âœ… ã¾ãšã¯æ¥½ã—ã‚€ã ã‘ã§OK</strong> - å …è‹¦ã—ã„èª¬æ˜ã¯ã‚ã‚Šã¾ã›ã‚“</p>
                    <p style="font-size: 1rem; margin: 0;"><strong>âœ… å®Œå…¨ç„¡æ–™</strong> - ä¸€åˆ‡è²»ç”¨ã¯ã‹ã‹ã‚Šã¾ã›ã‚“</p>
                </div>
            </div>
            
            <div class="reservation-form">
                <!-- å­¦æ ¡åŒºåˆ¥é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="school-type-selection-section" id="school-type-selection-section">
                    <div class="school-type-selection-title">å­¦æ ¡åŒºåˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                    <div class="school-type-buttons">
                        <button class="school-type-button" onclick="selectSchoolType('å°å­¦ç”Ÿ')">å°å­¦ç”Ÿ</button>
                        <button class="school-type-button" onclick="selectSchoolType('ä¸­å­¦ãƒ»é«˜æ ¡ç”Ÿ')">ä¸­å­¦ãƒ»é«˜æ ¡ç”Ÿ</button>
                        <button class="school-type-button" onclick="selectSchoolType('æœªå°±å­¦å…ãƒ»ãã®ä»–')">æœªå°±å­¦å…ãƒ»ãã®ä»–</button>
                    </div>
                </div>
                
                <!-- å­¦å¹´é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="grade-selection-section" id="grade-selection-section">
                    <div class="grade-selection-title" id="grade-selection-title">å­¦å¹´ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                    <div class="grade-buttons" id="grade-buttons">
                        <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
                    </div>
                </div>
                
                <div class="form-instruction" id="form-instruction" style="display: none;">
                    ã”å¸Œæœ›ã®æ—¥ä»˜ã¨æ™‚é–“å¸¯ã‚’ã‚¿ãƒƒãƒ—ã—ã¦äºˆç´„ã‚’ç¢ºå®šã—ã¦ãã ã•ã„
                </div>
                
                <div class="calendar-container" id="calendar-container">
                    <div class="calendar-header">
                        <div class="month-year" id="month-year">2025å¹´1æœˆ</div>
                        <div class="calendar-nav">
                            <button class="nav-button" id="prev-month" onclick="changeMonth(-1)">â† å‰æœˆ</button>
                            <button class="nav-button" id="next-month" onclick="changeMonth(1)">æ¬¡æœˆ â†’</button>
                        </div>
                    </div>
                    
                    <div class="calendar-weekdays">
                        <div class="weekday-header">æ—¥</div>
                        <div class="weekday-header">æœˆ</div>
                        <div class="weekday-header">ç«</div>
                        <div class="weekday-header">æ°´</div>
                        <div class="weekday-header">æœ¨</div>
                        <div class="weekday-header">é‡‘</div>
                        <div class="weekday-header">åœŸ</div>
                    </div>
                    
                    <div class="calendar-days" id="calendar-days"></div>
                </div>
                
                <div class="date-sections-container" id="date-sections-container">
                    <div id="date-sections"></div>
                </div>
                
                <!-- å­ä¾›ã®åå‰å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="child-name-section" id="child-name-section">
                    <div class="child-name-notice">
                        <strong>â€»å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦</strong><br>
                        ã”å…¥åŠ›ã„ãŸã ã„ãŸæƒ…å ±ã¯ã€ç„¡æ–™ä½“é¨“ã®äºˆç´„ç¢ºèªãŠã‚ˆã³ã”é€£çµ¡ã®ç›®çš„ã®ã¿ã«ä½¿ç”¨ã„ãŸã—ã¾ã™ã€‚äºˆç´„ä»¥å¤–ã®ç›®çš„ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã”ã–ã„ã¾ã›ã‚“ã€‚
                    </div>
                    <label for="child-name-input" class="child-name-label">ãŠå­æ§˜ã®ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <input 
                        type="text" 
                        id="child-name-input" 
                        class="child-name-input" 
                        placeholder="ä¾‹ï¼šã‚„ã¾ã  ãŸã‚ã†"
                        oninput="handleNameInput()"
                        oncompositionstart="isComposing = true"
                        oncompositionend="handleNameCompositionEnd()"
                        onkeydown="handleNameKeyDown(event)"
                        onblur="checkChildName()"
                    >
                </div>
                
                <!-- é›»è©±ç•ªå·å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="phone-section" id="phone-section">
                    <label for="phone-input" class="phone-label">é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <input 
                        type="tel" 
                        id="phone-input" 
                        class="phone-input" 
                        placeholder="ä¾‹ï¼š09012345678"
                        oninput="checkPhoneNumber()"
                    >
                    <div class="phone-error-message" id="phone-error-message">
                        æ­£ã—ã„é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚10æ¡ã¾ãŸã¯11æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
                
                <!-- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="email-section" id="email-section">
                    <label for="email-input" class="email-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„<span class="optional">ï¼ˆä»»æ„ï¼‰</span></label>
                    <input 
                        type="email" 
                        id="email-input" 
                        class="email-input" 
                        placeholder="ä¾‹ï¼šexample@email.com"
                        oninput="checkEmail()"
                    >
                    <div class="email-error-message" id="email-error-message">
                        æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
                
                <!-- è‡ªç”±è¨˜è¿°æ¬„ -->
                <div class="message-section" id="message-section">
                    <label for="message-textarea" class="message-label">ã”è³ªå•ãƒ»ã”è¦æœ›ãªã©<span class="optional">ï¼ˆä»»æ„ï¼‰</span></label>
                    <textarea 
                        id="message-textarea" 
                        class="message-textarea" 
                        placeholder="ã”è³ªå•ã‚„ã”è¦æœ›ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ã“ã¡ã‚‰ã«ã”è¨˜å…¥ãã ã•ã„"
                        oninput="updateMessage()"
                    ></textarea>
                </div>
                
                <div class="submit-section" id="submit-section">
                    <div class="selected-info" id="selected-info"></div>
                    <button class="submit-button" id="submit-button" onclick="submitReservation()" disabled>
                        äºˆç´„ã‚’ç¢ºå®šã™ã‚‹
                    </button>
                </div>

                <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«/ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="profile-section">
                    <img src="../images/hikosaka_photo.png" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«" class="profile-image" onerror="this.style.display='none'">
                    <div class="profile-message">
                        <strong style="color: var(--primary);">å°å­¦2å¹´ç”Ÿã®æ¯</strong><br>
                        æ¯é€±æ¥½ã—ãé€šã£ã¦ã„ã¾ã™ï¼ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå¥½ãã«ãªã£ãŸã‚ˆã†ã§ã™ã€‚
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- æ„Ÿè¬ãƒšãƒ¼ã‚¸ -->
    <section class="thank-you-section" id="thank-you-section">
        <!-- æ„Ÿè¬ãƒšãƒ¼ã‚¸ç”¨ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="thank-you-header">
            <div class="header-top">
                <div class="header-brand">
                    <a href="../index.html"><img src="../images/iteen_logo.png" alt="iTeen ãƒ­ã‚´" class="header-logo"></a>
                    <div class="header-school-name">æ­¦åº«ä¹‹è˜æ ¡</div>
                    <a href="tel:" class="header-phone" id="thank-you-header-phone-link">â˜</a>
                </div>
                <a href="https://page.line.me/555qxcak?oat_content=url&openQrModal=true" target="_blank" rel="noopener noreferrer" class="header-line-button">
                    ğŸ’¬ LINEã§è³ªå•
                </a>
            </div>
            <nav class="header-nav">
                <a href="../index.html">ãƒ›ãƒ¼ãƒ </a>
                <a href="../index.html#news">ãƒ‹ãƒ¥ãƒ¼ã‚¹</a>
                <a href="../index.html#courses">ã‚³ãƒ¼ã‚¹</a>
                <a href="../index.html#teachers">è¬›å¸«</a>
                <a href="values.html">å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨</a>
                <a href="../index.html#fee">æ–™é‡‘</a>
                <a href="../index.html#faq">ã‚ˆãã‚ã‚‹è³ªå•</a>
                <a href="../index.html#access">ã‚¢ã‚¯ã‚»ã‚¹</a>
                <a href="../index.html#contact">ãŠå•ã„åˆã‚ã›</a>
            </nav>
        </header>
        
        <div class="thank-you-container">
            <div class="thank-you-icon">ğŸ‰</div>
            <h2 class="thank-you-title">ã”äºˆç´„ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
            <p class="thank-you-subtitle">ç„¡æ–™ä½“é¨“æˆæ¥­ã®äºˆç´„ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸ</p>
            
            <div class="reservation-info-box" id="reservation-info-box">
                <div class="reservation-info-title">ğŸ“… äºˆç´„æƒ…å ±</div>
                <div class="reservation-info-item" id="reservation-date-item"></div>
                <div class="reservation-info-item" id="reservation-time-item"></div>
                <div class="reservation-info-item" id="reservation-name-item"></div>
                <div class="reservation-info-item" id="reservation-phone-item" style="display: none;"></div>
                <div class="reservation-info-item" id="reservation-email-item" style="display: none;"></div>
                <div class="reservation-info-item" id="reservation-message-item" style="display: none;"></div>
            </div>
            
            <div class="expectation-section">
                <h3 class="expectation-title">âœ¨ ä½“é¨“æˆæ¥­ã§ãŠæ¥½ã—ã¿ã„ãŸã ã‘ã‚‹ã“ã¨</h3>
                
                <div class="expectation-item">
                    <div class="expectation-icon">ğŸ®</div>
                    <div class="expectation-content">
                        <h4>å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ä½“é¨“</h4>
                        <p>ãŠå­æ§˜ã®å¹´é½¢ã‚„èˆˆå‘³ã«åˆã‚ã›ã¦ã€Scratchã‚„ãƒã‚¤ãƒ³ã‚¯ãƒ©ãƒ•ãƒˆãªã©ã€æ¥½ã—ããƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ä½“é¨“ã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚åˆã‚ã¦ã§ã‚‚å¤§ä¸ˆå¤«ï¼è¬›å¸«ãŒå„ªã—ãã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</p>
                    </div>
                </div>
                
                <div class="expectation-item">
                    <div class="expectation-icon">ğŸ¤</div>
                    <div class="expectation-content">
                        <h4>å€‹åˆ¥æŒ‡å°ã§ãŠå­æ§˜ã®ãƒšãƒ¼ã‚¹ã«åˆã‚ã›ã¦</h4>
                        <p>ä¸€äººã²ã¨ã‚Šã«åˆã‚ã›ãŸæŒ‡å°ã§ã€ç„¡ç†ãªãæ¥½ã—ãå­¦ã¹ã¾ã™ã€‚è³ªå•ã‚‚ã—ã‚„ã™ã„é›°å›²æ°—ã§ã€ãŠå­æ§˜ã®ã€Œã§ããŸï¼ã€ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
                
                <div class="expectation-item">
                    <div class="expectation-icon">ğŸ«</div>
                    <div class="expectation-content">
                        <h4>å®Ÿéš›ã®æ•™å®¤ã®é›°å›²æ°—ã‚’ä½“é¨“</h4>
                        <p>æ•™å®¤ã®é›°å›²æ°—ã‚„ã€ä»–ã®ç”Ÿå¾’ã•ã‚“ã®æ§˜å­ã‚‚ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚ãŠå­æ§˜ãŒæ¥½ã—ãé€šãˆã‚‹ç’°å¢ƒã‹ã©ã†ã‹ã€å®Ÿéš›ã«ã”ç¢ºèªãã ã•ã„ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="next-steps">
                <h3 class="next-steps-title">ğŸ“‹ å½“æ—¥ã®æµã‚Œ</h3>
                <ul class="next-steps-list">
                    <li><strong>1. ã”æ¥æ ¡</strong> - æ•™å®¤ã«ã„ã‚‰ã—ã¦ãã ã•ã„ï¼ˆæ‰‹ã¶ã‚‰ã§OKï¼ï¼‰</li>
                    <li><strong>2. ç°¡å˜ãªã”èª¬æ˜</strong> - æ•™å®¤ã®ã”ç´¹ä»‹ã¨ã€ãŠå­æ§˜ã®èˆˆå‘³ã‚’ãŠèãã—ã¾ã™</li>
                    <li><strong>3. ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä½“é¨“</strong> - å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’æ¥½ã—ã‚“ã§ã„ãŸã ãã¾ã™</li>
                    <li><strong>4. ã”è³ªå•ãƒ»ã”ç›¸è«‡</strong> - æ°—ã«ãªã‚‹ã“ã¨ã¯ä½•ã§ã‚‚ãŠèããã ã•ã„</li>
                </ul>
            </div>
            
            <div style="background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 20px; margin-bottom: 30px;">
                <p style="font-size: 1rem; line-height: 1.8; margin: 0;">
                    <strong style="color: #fff8e1;">ğŸ’ ãŠå­æ§˜ã®ã€Œã§ããŸï¼ã€ã‚’ä¸€ç·’ã«å–œã³ã¾ã™</strong><br>
                    ä½“é¨“æˆæ¥­ã§ã¯ã€ãŠå­æ§˜ãŒæ¥½ã—ã¿ãªãŒã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«è§¦ã‚Œã‚‰ã‚Œã‚‹ã‚ˆã†ã€<br>
                    è¬›å¸«ãŒä¸å¯§ã«ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚<br>
                    ãŠä¼šã„ã§ãã‚‹ã®ã‚’æ¥½ã—ã¿ã«ã—ã¦ãŠã‚Šã¾ã™ï¼
                </p>
            </div>
            
            <div class="thank-you-actions">
                <a href="../index.html" class="thank-you-button">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
                <a href="tel:" class="thank-you-button secondary" id="thank-you-phone-link">ğŸ“ ãŠå•ã„åˆã‚ã›: </a>
            </div>
        </div>
        
        <!-- æ„Ÿè¬ãƒšãƒ¼ã‚¸ç”¨ãƒ•ãƒƒã‚¿ãƒ¼ -->
        <footer class="thank-you-footer">
            <div class="container">
                <p><a href="../index.html#access">ã‚¢ã‚¯ã‚»ã‚¹ãƒ»å–¶æ¥­æ™‚é–“ã¯ã“ã¡ã‚‰</a></p>
                <p>&copy; 2025 iTeen æ­¦åº«ä¹‹è˜æ ¡</p>
            </div>
        </footer>
    </section>

    <footer>
        <p><a href="../index.html#access">ã‚¢ã‚¯ã‚»ã‚¹ãƒ»å–¶æ¥­æ™‚é–“ã¯ã“ã¡ã‚‰</a></p>
        <p>&copy; 2025 iTeen æ­¦åº«ä¹‹è˜æ ¡</p>
    </footer>

    <!-- å…±é€šè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ -->
    <script src="config.js"></script>
    
    <script>
        // æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆ
        // æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆï¼ˆé–‹å§‹æ™‚åˆ»ã¨çµ‚äº†æ™‚åˆ»ã®ãƒšã‚¢ï¼‰
        const timeSlots = [
            { start: '8:10', end: '9:10' },
            { start: '9:20', end: '10:20' },
            { start: '10:30', end: '11:30' },
            { start: '11:40', end: '12:30' },
            { start: '13:40', end: '14:40' },
            { start: '14:50', end: '15:50' },
            { start: '16:00', end: '17:00' },
            { start: '17:10', end: '18:10' },
            { start: '18:20', end: '19:20' },
            { start: '19:30', end: '20:30' },
            { start: '20:40', end: '21:40' }
        ];
        
        // ç¾åœ¨ã®æ—¥ä»˜
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        // é¸æŠã•ã‚ŒãŸæ—¥æ™‚
        let selectedDate = null;
        let selectedTime = null;
        
        // é¸æŠã•ã‚ŒãŸå­¦æ ¡åŒºåˆ¥ã¨å­¦å¹´
        let selectedSchoolType = null;
        let selectedGrade = null;
        
        // å­ä¾›ã®åå‰
        let childName = '';
        
        // é›»è©±ç•ªå·
        let phoneNumber = '';
        
        // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
        let emailAddress = '';
        
        // è‡ªç”±è¨˜è¿°æ¬„
        let messageText = '';
        
        // IMEå…¥åŠ›çŠ¶æ…‹
        let isComposing = false;
        
        // å­¦å¹´ã®å®šç¾©
        const gradeOptions = {
            'å°å­¦ç”Ÿ': ['å°å­¦1å¹´ç”Ÿ', 'å°å­¦2å¹´ç”Ÿ', 'å°å­¦3å¹´ç”Ÿ', 'å°å­¦4å¹´ç”Ÿ', 'å°å­¦5å¹´ç”Ÿ', 'å°å­¦6å¹´ç”Ÿ'],
            'ä¸­å­¦ãƒ»é«˜æ ¡ç”Ÿ': ['ä¸­å­¦1å¹´ç”Ÿ', 'ä¸­å­¦2å¹´ç”Ÿ', 'ä¸­å­¦3å¹´ç”Ÿ', 'é«˜æ ¡1å¹´ç”Ÿ', 'é«˜æ ¡2å¹´ç”Ÿ', 'é«˜æ ¡3å¹´ç”Ÿ'],
            'æœªå°±å­¦å…ãƒ»ãã®ä»–': ['å¹´å°‘', 'å¹´ä¸­', 'å¹´é•·', 'ãã®ä»–']
        };
        
        // ç¾åœ¨è¡¨ç¤ºä¸­ã®æœˆ
        let currentMonth = new Date(today.getFullYear(), today.getMonth(), 1);
        
        // æ—¥ä»˜ã”ã¨ã®è¨˜å·ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆä¾‹ï¼šä¸¸ã€ä¸‰è§’ã€ãƒãƒ„ï¼‰
        const dateSymbols = {};
        
        // äºˆç´„ä¸å¯ã®æ—¥æ™‚ï¼ˆä¾‹ï¼šæ—¢ã«äºˆç´„æ¸ˆã¿ï¼‰
        const unavailableTimes = {};
        
        // Google Calendar APIè¨­å®š
        const GOOGLE_CALENDAR_CONFIG = {
            calendarId: '16f6013dd3e06376074237fd9cf818e7287bb388ed28757e477058f90c97be52@group.calendar.google.com',
            apiKey: 'AIzaSyCk05BaK1CeOJByKFI7ysVC5cdftqYWndw'
        };
        
        // Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
        async function fetchGoogleCalendarEvents(startDate, endDate) {
            try {
                console.log('ğŸ“… Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰äºˆç´„æ¸ˆã¿æ—¥æ™‚ã‚’å–å¾—ä¸­...');
                const url = `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(GOOGLE_CALENDAR_CONFIG.calendarId)}/events?` +
                    `key=${GOOGLE_CALENDAR_CONFIG.apiKey}&` +
                    `timeMin=${startDate.toISOString()}&` +
                    `timeMax=${endDate.toISOString()}&` +
                    `singleEvents=true&` +
                    `orderBy=startTime`;
                
                const response = await fetch(url);
                
                if (!response.ok) {
                    if (response.status === 403) {
                        console.warn('âš ï¸ Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼API 403ã‚¨ãƒ©ãƒ¼: APIã‚­ãƒ¼ãŒç„¡åŠ¹ã‹ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
                        console.warn('è§£æ±ºæ–¹æ³•:');
                        console.warn('1. Google Cloud Consoleã§APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª');
                        console.warn('2. Calendar APIãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª');
                        console.warn('3. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒå…¬é–‹è¨­å®šã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆè¨­å®š â†’ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®çµ±åˆ â†’ ã“ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä¸€èˆ¬å…¬é–‹ã™ã‚‹ï¼‰');
                    } else {
                        console.error('Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼API ã‚¨ãƒ©ãƒ¼:', response.status, response.statusText);
                    }
                    return [];
                }
                
                const data = await response.json();
                
                if (data.error) {
                    console.error('Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼API ã‚¨ãƒ©ãƒ¼:', data.error);
                    if (data.error.code === 403) {
                        console.warn('âš ï¸ APIã‚­ãƒ¼ãŒç„¡åŠ¹ã‹ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
                    }
                    return [];
                }
                
                const events = data.items || [];
                console.log(`âœ… ${events.length}ä»¶ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã—ã¾ã—ãŸ`);
                return events;
            } catch (error) {
                console.error('ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                return [];
            }
        }
        
        // äºˆç´„æ¸ˆã¿æ™‚é–“å¸¯ã‚’æ›´æ–°
        async function updateUnavailableTimes() {
            try {
                const now = new Date();
                const endDate = new Date(now);
                endDate.setMonth(endDate.getMonth() + 1); // ä»Šæ—¥ã‹ã‚‰æ•°ãˆã¦1ãƒ¶æœˆå…ˆã¾ã§
                
                const events = await fetchGoogleCalendarEvents(now, endDate);
                
                // äºˆç´„æ¸ˆã¿æ™‚é–“å¸¯ã‚’ã‚¯ãƒªã‚¢
                Object.keys(unavailableTimes).forEach(key => {
                    delete unavailableTimes[key];
                });
                
                // ã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰äºˆç´„æ¸ˆã¿æ™‚é–“å¸¯ã‚’æŠ½å‡º
                events.forEach(event => {
                    if (event.start && event.start.dateTime) {
                        const eventDate = new Date(event.start.dateTime);
                        const dateStr = formatDate(eventDate);
                        const eventHour = eventDate.getHours();
                        const eventMin = eventDate.getMinutes();
                        const timeStr = `${String(eventHour).padStart(2, '0')}:${String(eventMin).padStart(2, '0')}`;
                        
                        // æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆã«ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’æ¢ã™ï¼ˆé–‹å§‹æ™‚åˆ»ã§å®Œå…¨ä¸€è‡´ã¾ãŸã¯æœ€ã‚‚è¿‘ã„ã‚‚ã®ï¼‰
                        let matchedTimeSlot = timeSlots.find(slot => slot.start === timeStr);
                        
                        // å®Œå…¨ä¸€è‡´ãŒãªã„å ´åˆã€æœ€ã‚‚è¿‘ã„æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆã‚’æ¢ã™ï¼ˆÂ±10åˆ†ä»¥å†…ï¼‰
                        if (!matchedTimeSlot) {
                            matchedTimeSlot = timeSlots.find(slot => {
                                const [slotHour, slotMin] = slot.start.split(':').map(Number);
                                const timeDiff = Math.abs((eventHour * 60 + eventMin) - (slotHour * 60 + slotMin));
                                return timeDiff <= 10; // 10åˆ†ä»¥å†…
                            });
                        }
                        
                        if (matchedTimeSlot) {
                            if (!unavailableTimes[dateStr]) {
                                unavailableTimes[dateStr] = [];
                            }
                            if (!unavailableTimes[dateStr].includes(matchedTimeSlot.start)) {
                                unavailableTimes[dateStr].push(matchedTimeSlot.start);
                            }
                        }
                    }
                });
                
                console.log(`ğŸ“Œ ${Object.keys(unavailableTimes).reduce((sum, date) => sum + unavailableTimes[date].length, 0)}ä»¶ã®äºˆç´„æ¸ˆã¿æ™‚é–“å¸¯ã‚’ç™»éŒ²ã—ã¾ã—ãŸ`);
                console.log('äºˆç´„æ¸ˆã¿æ—¥æ™‚:', unavailableTimes);
                
                // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’å†ç”Ÿæˆã—ã¦åæ˜ 
                generateCalendar();
                console.log('âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
            } catch (error) {
                console.error('äºˆç´„æ¸ˆã¿æ™‚é–“å¸¯ã®æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆYYYY-MM-DDï¼‰
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // æ—¥ä»˜æ–‡å­—åˆ—ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆYYYY/MM/DD (æ›œæ—¥)ï¼‰
        function formatDateDisplay(dateStr) {
            const date = new Date(dateStr + 'T00:00:00');
            const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekday = weekdays[date.getDay()];
            return `${date.getFullYear()}/${month}/${day} (${weekday})`;
        }
        
        // ä»Šæ—¥ã‹ã©ã†ã‹ã‚’åˆ¤å®š
        function isToday(dateStr) {
            return dateStr === formatDate(today);
        }
        
        // éå»ã®æ—¥ä»˜ã‹ã©ã†ã‹ã‚’åˆ¤å®š
        function isPast(dateStr) {
            const date = new Date(dateStr + 'T00:00:00');
            return date < today;
        }
        
        // 1ãƒ¶æœˆå…ˆä»¥é™ã®æ—¥ä»˜ã‹ã©ã†ã‹ã‚’åˆ¤å®šï¼ˆä»Šæ—¥ã‹ã‚‰æ•°ãˆã¦1ãƒ¶æœˆå¾Œã®åŒã˜æ—¥ã¾ã§ï¼‰
        // ä¾‹ï¼šä»Šæ—¥ãŒ1æœˆ15æ—¥ãªã‚‰ã€2æœˆ15æ—¥ã®23:59:59ã¾ã§äºˆç´„å¯èƒ½
        function isBeyondOneMonth(dateStr) {
            const date = new Date(dateStr + 'T00:00:00');
            const oneMonthLater = new Date(today);
            oneMonthLater.setMonth(oneMonthLater.getMonth() + 1);
            oneMonthLater.setHours(23, 59, 59, 999); // ä»Šæ—¥ã‹ã‚‰1ãƒ¶æœˆå¾Œã®åŒã˜æ—¥ã®23:59:59ã¾ã§
            return date > oneMonthLater;
        }
        
        // æ—¥ä»˜ã®è¨˜å·ã‚’å–å¾—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ä¸¸ï¼‰
        function getDateSymbol(dateStr) {
            if (dateSymbols[dateStr]) {
                return dateSymbols[dateStr];
            }
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šéå»ã®æ—¥ä»˜ã¾ãŸã¯1ãƒ¶æœˆå…ˆä»¥é™ã®æ—¥ä»˜ã¯ãƒãƒ„ã€ãã‚Œä»¥å¤–ã¯ä¸¸
            if (isPast(dateStr) || isBeyondOneMonth(dateStr)) {
                return 'cross';
            }
            return 'circle';
        }
        
        // è¨˜å·ã®è¡¨ç¤ºæ–‡å­—ã‚’å–å¾—
        function getSymbolChar(symbol) {
            switch(symbol) {
                case 'circle': return 'â—‹';
                case 'triangle': return 'â–³';
                case 'cross': return 'Ã—';
                default: return 'â—‹';
            }
        }
        
        // è¨˜å·ã®ã‚¯ãƒ©ã‚¹åã‚’å–å¾—
        function getSymbolClass(symbol) {
            switch(symbol) {
                case 'circle': return 'symbol-circle';
                case 'triangle': return 'symbol-triangle';
                case 'cross': return 'symbol-cross';
                default: return 'symbol-circle';
            }
        }
        
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ç”Ÿæˆ
        function generateCalendar() {
            const container = document.getElementById('calendar-days');
            container.innerHTML = '';
            
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            // æœˆã®æœ€åˆã®æ—¥
            const firstDay = new Date(year, month, 1);
            // æœˆã®æœ€å¾Œã®æ—¥
            const lastDay = new Date(year, month + 1, 0);
            // æœˆã®æœ€åˆã®æ—¥ã®æ›œæ—¥ï¼ˆ0=æ—¥æ›œæ—¥ï¼‰
            const startDay = firstDay.getDay();
            // æœˆã®æ—¥æ•°
            const daysInMonth = lastDay.getDate();
            
            // å‰æœˆã®æœ€å¾Œã®æ•°æ—¥ã‚’è¡¨ç¤º
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = startDay - 1; i >= 0; i--) {
                const day = prevMonthLastDay - i;
                const date = new Date(year, month - 1, day);
                const dateStr = formatDate(date);
                const dayElement = createDayElement(dateStr, day, true);
                container.appendChild(dayElement);
            }
            
            // ä»Šæœˆã®æ—¥ä»˜
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateStr = formatDate(date);
                const dayElement = createDayElement(dateStr, day, false);
                container.appendChild(dayElement);
            }
            
            // æ¬¡æœˆã®æœ€åˆã®æ•°æ—¥ã‚’è¡¨ç¤ºï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’åŸ‹ã‚ã‚‹ãŸã‚ï¼‰
            const totalCells = container.children.length;
            const remainingCells = 42 - totalCells; // 6é€±é–“åˆ†
            for (let day = 1; day <= remainingCells; day++) {
                const date = new Date(year, month + 1, day);
                const dateStr = formatDate(date);
                const dayElement = createDayElement(dateStr, day, true);
                container.appendChild(dayElement);
            }
            
            // å¹´æœˆè¡¨ç¤ºã‚’æ›´æ–°
            document.getElementById('month-year').textContent = 
                `${year}å¹´${month + 1}æœˆ`;
            
            // å‰æœˆãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’è¨­å®š
            const prevButton = document.getElementById('prev-month');
            const minDate = new Date(today.getFullYear(), today.getMonth() - 1, 1);
            prevButton.disabled = currentMonth <= minDate;
            
            // æ¬¡æœˆãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’è¨­å®šï¼ˆä»Šæ—¥ã‹ã‚‰æ•°ãˆã¦1ãƒ¶æœˆå…ˆã¾ã§ï¼‰
            // ä¾‹ï¼šä»Šæ—¥ãŒ1æœˆãªã‚‰ã€2æœˆã¾ã§è¡¨ç¤ºå¯èƒ½ã€3æœˆã¯è¡¨ç¤ºä¸å¯
            const nextButton = document.getElementById('next-month');
            const maxDate = new Date(today.getFullYear(), today.getMonth() + 2, 1); // 2ãƒ¶æœˆå…ˆã®1æ—¥ï¼ˆ3æœˆ1æ—¥ï¼‰ä»¥é™ã¯è¡¨ç¤ºä¸å¯
            nextButton.disabled = currentMonth >= maxDate;
        }
        
        // æ—¥ä»˜è¦ç´ ã‚’ä½œæˆ
        function createDayElement(dateStr, day, isOtherMonth) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            
            if (isOtherMonth) {
                dayElement.classList.add('other-month');
            }
            
            const isPastDate = isPast(dateStr);
            const isBeyondOneMonthDate = isBeyondOneMonth(dateStr);
            if (isPastDate && !isOtherMonth) {
                dayElement.classList.add('past');
            }
            
            const symbol = getDateSymbol(dateStr);
            const symbolChar = getSymbolChar(symbol);
            const symbolClass = getSymbolClass(symbol);
            
            // è¨˜å·ãŒãƒãƒ„ã®å ´åˆã€éå»ã®æ—¥ä»˜ã€ã¾ãŸã¯1ãƒ¶æœˆå…ˆä»¥é™ã®æ—¥ä»˜ã¯é¸æŠä¸å¯
            if (symbol !== 'cross' && !isPastDate && !isBeyondOneMonthDate && !isOtherMonth) {
                dayElement.classList.add('selectable');
                dayElement.addEventListener('click', () => selectDate(dateStr, dayElement));
            } else if (isBeyondOneMonthDate && !isOtherMonth) {
                // 1ãƒ¶æœˆå…ˆä»¥é™ã®æ—¥ä»˜ã‚‚é¸æŠä¸å¯ã¨ã—ã¦è¡¨ç¤º
                dayElement.classList.add('past');
            }
            
            if (isToday(dateStr) && !isOtherMonth) {
                dayElement.classList.add('today');
            }
            
            dayElement.innerHTML = `
                <div class="day-number">${day}</div>
                <div class="day-symbol ${symbolClass}">${symbolChar}</div>
            `;
            
            return dayElement;
        }
        
        // æ—¥ä»˜ã‚’é¸æŠ
        function selectDate(dateStr, element) {
            // ä»¥å‰ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.calendar-day.selected').forEach(day => {
                day.classList.remove('selected');
            });
            
            // æ–°ã—ã„é¸æŠ
            element.classList.add('selected');
            selectedDate = dateStr;
            selectedTime = null;
            childName = ''; // åå‰ã‚’ãƒªã‚»ãƒƒãƒˆ
            phoneNumber = ''; // é›»è©±ç•ªå·ã‚’ãƒªã‚»ãƒƒãƒˆ
            emailAddress = ''; // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
            messageText = ''; // è‡ªç”±è¨˜è¿°æ¬„ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('child-name-input').value = ''; // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('phone-input').value = ''; // é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('email-input').value = ''; // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('message-textarea').value = ''; // è‡ªç”±è¨˜è¿°æ¬„ã‚’ã‚¯ãƒªã‚¢
            
            // æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
            showTimeSlots(dateStr);
            
            // é¸æŠæƒ…å ±ã‚’æ›´æ–°
            updateSelectedInfo();
            
            // å­ä¾›ã®åå‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’éè¡¨ç¤º
            document.getElementById('child-name-section').classList.remove('show');
            // é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’éè¡¨ç¤º
            document.getElementById('phone-section').classList.remove('show');
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’éè¡¨ç¤º
            document.getElementById('email-section').classList.remove('show');
            
            // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ï¼ˆæ™‚é–“ã‚’é¸æŠã™ã‚‹ã¾ã§ï¼‰
            document.getElementById('submit-button').disabled = true;
            
            // æ™‚åˆ»é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå°‘ã—é…å»¶ã‚’å…¥ã‚Œã¦è¡¨ç¤ºå¾Œã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰
            setTimeout(() => {
                const dateSectionsContainer = document.getElementById('date-sections-container');
                if (dateSectionsContainer) {
                    dateSectionsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 100);
        }
        
        // æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
        function showTimeSlots(dateStr) {
            // æ—¢å­˜ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
            document.querySelectorAll('.date-section').forEach(section => {
                section.classList.remove('show');
            });
            
            // è©²å½“ã™ã‚‹æ—¥ä»˜ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™ã‹ã€æ–°è¦ä½œæˆ
            let dateSection = document.querySelector(`[data-date="${dateStr}"]`);
            
            if (!dateSection) {
                dateSection = createDateSection(dateStr);
                document.getElementById('date-sections').appendChild(dateSection);
            }
            
            dateSection.classList.add('show');
        }
        
        // æ—¥ä»˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
        function createDateSection(dateStr) {
            const dateSection = document.createElement('div');
            dateSection.className = 'date-section';
            dateSection.setAttribute('data-date', dateStr);
            
            const dateTitle = document.createElement('div');
            dateTitle.className = 'date-title';
            dateTitle.innerHTML = formatDateDisplay(dateStr);
            if (isToday(dateStr)) {
                const todayBadge = document.createElement('span');
                todayBadge.className = 'today-badge';
                todayBadge.textContent = 'æœ¬æ—¥';
                dateTitle.appendChild(todayBadge);
            }
            dateSection.appendChild(dateTitle);
            
            const timeSlotsContainer = document.createElement('div');
            timeSlotsContainer.className = 'time-slots';
            
            const unavailableForDate = unavailableTimes[dateStr] || [];
            
            timeSlots.forEach(slot => {
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                
                const timeDisplay = `${slot.start}-${slot.end}`;
                const isUnavailable = unavailableForDate.includes(slot.start);
                
                if (isUnavailable) {
                    timeSlot.classList.add('unavailable');
                    timeSlot.innerHTML = `
                        <span class="time-slot-icon">Ã—</span>
                        <span>${timeDisplay}</span>
                    `;
                } else {
                    timeSlot.classList.add('available');
                    timeSlot.innerHTML = `
                        <span class="time-slot-icon">â—</span>
                        <span>${timeDisplay}</span>
                    `;
                    timeSlot.addEventListener('click', () => selectTimeSlot(dateStr, slot.start, timeSlot));
                }
                
                timeSlotsContainer.appendChild(timeSlot);
            });
            
            dateSection.appendChild(timeSlotsContainer);
            return dateSection;
        }
        
        // æ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆã‚’é¸æŠ
        function selectTimeSlot(dateStr, time, element) {
            // é¸æŠã•ã‚ŒãŸæ™‚é–“ã‚¹ãƒ­ãƒƒãƒˆã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
            const selectedTimeDisplay = element.querySelector('span:last-child').textContent;
            
            // ä»¥å‰ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.time-slot.selected').forEach(slot => {
                slot.classList.remove('selected');
                slot.classList.add('available');
                const timeText = slot.querySelector('span:last-child').textContent;
                slot.innerHTML = `
                    <span class="time-slot-icon">â—</span>
                    <span>${timeText}</span>
                `;
            });
            
            // æ–°ã—ã„é¸æŠ
            element.classList.remove('available');
            element.classList.add('selected');
            element.innerHTML = `
                <span class="time-slot-icon">â—</span>
                <span>${selectedTimeDisplay}</span>
            `;
            
            selectedDate = dateStr;
            selectedTime = time;
            
            // é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°
            updateSubmitButton();
            
            // åå‰ã¨é›»è©±ç•ªå·ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨è‡ªç”±è¨˜è¿°æ¬„ã‚’ãƒªã‚»ãƒƒãƒˆ
            childName = '';
            phoneNumber = '';
            emailAddress = '';
            messageText = '';
            document.getElementById('child-name-input').value = '';
            document.getElementById('phone-input').value = '';
            document.getElementById('email-input').value = '';
            document.getElementById('message-textarea').value = '';
            
            // é¸æŠæƒ…å ±ã‚’æ›´æ–°
            updateSelectedInfo();
            
            // å­ä¾›ã®åå‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¡¨ç¤º
            document.getElementById('child-name-section').classList.add('show');
            
            // é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯éè¡¨ç¤º
            document.getElementById('phone-section').classList.remove('show');
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯éè¡¨ç¤º
            document.getElementById('email-section').classList.remove('show');
            
            // é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°ï¼ˆåå‰ã€é›»è©±ç•ªå·ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒãƒªã‚»ãƒƒãƒˆã•ã‚ŒãŸãŸã‚ç„¡åŠ¹ã«ãªã‚‹ï¼‰
            updateSubmitButton();
            
            // åå‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('child-name-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // æ™‚åˆ»ã‚’è¡¨ç¤ºå½¢å¼ã«å¤‰æ›ï¼ˆé–‹å§‹æ™‚åˆ»-çµ‚äº†æ™‚åˆ»ï¼‰
        function formatTimeDisplay(time) {
            const selectedSlot = timeSlots.find(slot => slot.start === time);
            return selectedSlot ? `${selectedSlot.start}-${selectedSlot.end}` : time;
        }
        
        // é¸æŠæƒ…å ±ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateSelectedInfo() {
            const selectedInfo = document.getElementById('selected-info');
            let infoText = '';
            
            if (selectedDate && selectedTime) {
                const timeDisplay = formatTimeDisplay(selectedTime);
                infoText = `äºˆç´„æ—¥æ™‚: ${formatDateDisplay(selectedDate)} ${timeDisplay}`;
                
                if (childName) {
                    infoText += `\nãŠåå‰: ${childName}`;
                }
                
                if (phoneNumber) {
                    infoText += `\né›»è©±ç•ªå·: ${phoneNumber}`;
                }
                if (emailAddress) {
                    infoText += `\nãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: ${emailAddress}`;
                }
                if (messageText) {
                    infoText += `\nã”è³ªå•ãƒ»ã”è¦æœ›: ${messageText}`;
                }
            } else if (selectedDate) {
                infoText = `äºˆç´„æ—¥æ™‚: ${formatDateDisplay(selectedDate)}`;
            }
            
            if (infoText) {
                selectedInfo.textContent = infoText;
                selectedInfo.classList.add('show');
            } else {
                selectedInfo.classList.remove('show');
            }
        }
        
        // åå‰å…¥åŠ›æ™‚ã®å‡¦ç†ï¼ˆIMEå…¥åŠ›ä¸­ã¯é·ç§»ã—ãªã„ï¼‰
        function handleNameInput() {
            // IMEå…¥åŠ›ä¸­ã¯ä½•ã‚‚ã—ãªã„
            if (isComposing) {
                return;
            }
            // é¸æŠæƒ…å ±ã®ã¿æ›´æ–°ï¼ˆé·ç§»ã¯ã—ãªã„ï¼‰
            const nameInput = document.getElementById('child-name-input');
            childName = nameInput.value.trim();
            updateSelectedInfo();
        }
        
        // IMEå…¥åŠ›å®Œäº†æ™‚ã®å‡¦ç†
        function handleNameCompositionEnd() {
            isComposing = false;
            // IMEå…¥åŠ›ãŒå®Œäº†ã—ãŸã‚‰ã€åå‰ã‚’ãƒã‚§ãƒƒã‚¯
            checkChildName();
        }
        
        // åå‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚­ãƒ¼ãƒ€ã‚¦ãƒ³å‡¦ç†
        function handleNameKeyDown(event) {
            // Enterã‚­ãƒ¼ãŒæŠ¼ã•ã‚ŒãŸã‚‰ã€IMEå…¥åŠ›ãŒå®Œäº†ã—ã¦ã„ãªãã¦ã‚‚ç¢ºå®š
            if (event.key === 'Enter') {
                isComposing = false;
                event.preventDefault();
                checkChildName();
            }
        }
        
        // å­ä¾›ã®åå‰ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
        function checkChildName() {
            const nameInput = document.getElementById('child-name-input');
            childName = nameInput.value.trim();
            
            // åå‰ãŒå…¥åŠ›ã•ã‚ŒãŸã‚‰é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¡¨ç¤º
            if (childName) {
                document.getElementById('phone-section').classList.add('show');
                // é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                document.getElementById('phone-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                document.getElementById('phone-section').classList.remove('show');
                phoneNumber = '';
                document.getElementById('phone-input').value = '';
            }
            
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›æ¬„ã®è¡¨ç¤º/éè¡¨ç¤º
            if (phoneNumber && validateJapanesePhoneNumber(phoneNumber)) {
                document.getElementById('email-section').classList.add('show');
                // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                setTimeout(() => {
                    document.getElementById('email-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            } else {
                document.getElementById('email-section').classList.remove('show');
                emailAddress = '';
                document.getElementById('email-input').value = '';
            }
            
            // é¸æŠæƒ…å ±ã‚’æ›´æ–°
            updateSelectedInfo();
            
            // é€ä¿¡ãƒœã‚¿ãƒ³ã¯é›»è©±ç•ªå·ãŒå…¥åŠ›ã•ã‚Œã‚‹ã¾ã§ç„¡åŠ¹
            checkPhoneNumber();
        }
        
        // æ—¥æœ¬å›½å†…ã®é›»è©±ç•ªå·ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        function validateJapanesePhoneNumber(phone) {
            // ãƒã‚¤ãƒ•ãƒ³ã‚„ã‚¹ãƒšãƒ¼ã‚¹ã‚’é™¤å»
            const cleaned = phone.replace(/[-\s]/g, '');
            
            // æ•°å­—ã®ã¿ã‹ãƒã‚§ãƒƒã‚¯
            if (!/^\d+$/.test(cleaned)) {
                return false;
            }
            
            // 10æ¡ã¾ãŸã¯11æ¡ã‹ãƒã‚§ãƒƒã‚¯
            if (cleaned.length !== 10 && cleaned.length !== 11) {
                return false;
            }
            
            // 0ã§å§‹ã¾ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆæ—¥æœ¬å›½å†…ã®é›»è©±ç•ªå·ã¯0ã§å§‹ã¾ã‚‹ï¼‰
            if (!cleaned.startsWith('0')) {
                return false;
            }
            
            // æºå¸¯é›»è©±ï¼ˆ090, 080, 070ã§å§‹ã¾ã‚‹11æ¡ï¼‰
            if (cleaned.length === 11 && /^0[789]0/.test(cleaned)) {
                return true;
            }
            
            // å›ºå®šé›»è©±ï¼ˆ10æ¡ã¾ãŸã¯11æ¡ï¼‰
            if (cleaned.length === 10 || cleaned.length === 11) {
                // ãƒ•ãƒªãƒ¼ãƒ€ã‚¤ãƒ¤ãƒ«ï¼ˆ0120, 0800ãªã©ï¼‰
                if (/^0(120|800|570|500|200|990|920|930|950|960|980|570)/.test(cleaned)) {
                    return true;
                }
                // ãã®ä»–ã®å›ºå®šé›»è©±
                if (/^0[1-9]/.test(cleaned)) {
                    return true;
                }
            }
            
            return false;
        }
        
        // é›»è©±ç•ªå·ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
        function checkPhoneNumber() {
            const phoneInput = document.getElementById('phone-input');
            const errorMessage = document.getElementById('phone-error-message');
            phoneNumber = phoneInput.value.trim();
            
            // é›»è©±ç•ªå·ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (phoneNumber) {
                const isValid = validateJapanesePhoneNumber(phoneNumber);
                
                if (isValid) {
                    // æœ‰åŠ¹ãªé›»è©±ç•ªå·
                    phoneInput.classList.remove('error');
                    errorMessage.classList.remove('show');
                    
                    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›æ¬„ã‚’è¡¨ç¤º
                    document.getElementById('email-section').classList.add('show');
                    setTimeout(() => {
                        document.getElementById('email-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                } else {
                    // ç„¡åŠ¹ãªé›»è©±ç•ªå·
                    phoneInput.classList.add('error');
                    errorMessage.classList.add('show');
                    phoneNumber = ''; // ç„¡åŠ¹ãªå ´åˆã¯ç©ºã«ã™ã‚‹
                    
                    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›æ¬„ã‚’éè¡¨ç¤º
                    document.getElementById('email-section').classList.remove('show');
                    emailAddress = '';
                    document.getElementById('email-input').value = '';
                }
            } else {
                // å…¥åŠ›ãŒãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’éè¡¨ç¤º
                phoneInput.classList.remove('error');
                errorMessage.classList.remove('show');
                
                // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›æ¬„ã‚’éè¡¨ç¤º
                document.getElementById('email-section').classList.remove('show');
                emailAddress = '';
                document.getElementById('email-input').value = '';
            }
            
            // é¸æŠæƒ…å ±ã‚’æ›´æ–°
            updateSelectedInfo();
            
            // é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°
            updateSubmitButton();
        }
        
        // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒã‚§ãƒƒã‚¯
        function checkEmail() {
            const emailInput = document.getElementById('email-input');
            const errorMessage = document.getElementById('email-error-message');
            emailAddress = emailInput.value.trim();
            
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (emailAddress) {
                const isValid = validateEmail(emailAddress);
                
                if (isValid) {
                    // æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
                    emailInput.classList.remove('error');
                    errorMessage.classList.remove('show');
                    
                    // è‡ªç”±è¨˜è¿°æ¬„ã‚’è¡¨ç¤º
                    document.getElementById('message-section').classList.add('show');
                } else {
                    // ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
                    emailInput.classList.add('error');
                    errorMessage.classList.add('show');
                    emailAddress = ''; // ç„¡åŠ¹ãªå ´åˆã¯ç©ºã«ã™ã‚‹
                }
            } else {
                // å…¥åŠ›ãŒãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’éè¡¨ç¤ºï¼ˆä»»æ„é …ç›®ãªã®ã§OKï¼‰
                emailInput.classList.remove('error');
                errorMessage.classList.remove('show');
                
                // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç©ºã§ã‚‚è‡ªç”±è¨˜è¿°æ¬„ã‚’è¡¨ç¤º
                document.getElementById('message-section').classList.add('show');
            }
            
            // é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°
            updateSubmitButton();
        }
        
        // è‡ªç”±è¨˜è¿°æ¬„ã‚’æ›´æ–°
        function updateMessage() {
            const messageTextarea = document.getElementById('message-textarea');
            messageText = messageTextarea.value.trim();
        }
        
        // é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°
        function updateSubmitButton() {
            const submitButton = document.getElementById('submit-button');
            
            // å¿…é ˆé …ç›®ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ä»»æ„ï¼‰
            const hasName = childName && childName.trim() !== '';
            const hasPhone = phoneNumber && phoneNumber.trim() !== '' && validateJapanesePhoneNumber(phoneNumber);
            const hasDate = selectedDate !== null;
            const hasTime = selectedTime !== null;
            
            // å¿…é ˆé …ç›®ï¼ˆåå‰ã€é›»è©±ç•ªå·ã€æ—¥æ™‚ï¼‰ãŒã™ã¹ã¦å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿é€ä¿¡ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            if (hasName && hasPhone && hasDate && hasTime) {
                submitButton.disabled = false;
            } else {
                submitButton.disabled = true;
            }
        }
        
        // å­¦æ ¡åŒºåˆ¥ã‚’é¸æŠ
        function selectSchoolType(schoolType) {
            // ä»¥å‰ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.school-type-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // æ–°ã—ã„é¸æŠ
            event.target.classList.add('selected');
            selectedSchoolType = schoolType;
            selectedGrade = null; // å­¦å¹´ã‚’ãƒªã‚»ãƒƒãƒˆ
            
            // å­¦å¹´é¸æŠãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
            const gradeButtonsContainer = document.getElementById('grade-buttons');
            gradeButtonsContainer.innerHTML = '';
            
            const grades = gradeOptions[schoolType];
            if (grades && grades.length > 0) {
                grades.forEach(grade => {
                    const button = document.createElement('button');
                    button.className = 'grade-button';
                    button.textContent = grade;
                    button.onclick = function() { selectGrade(grade); };
                    gradeButtonsContainer.appendChild(button);
                });
                
                // å­¦å¹´é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
                document.getElementById('grade-selection-section').classList.add('show');
                
                // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ãƒ•ã‚©ãƒ¼ãƒ ã¯éè¡¨ç¤ºã®ã¾ã¾
                document.getElementById('form-instruction').style.display = 'none';
                document.getElementById('calendar-container').classList.remove('show');
                document.getElementById('date-sections-container').classList.remove('show');
                document.getElementById('submit-section').classList.remove('show');
                
                // å­¦å¹´é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                document.getElementById('grade-selection-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // å­¦å¹´ã‚’é¸æŠ
        function selectGrade(grade) {
            // ä»¥å‰ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.grade-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // æ–°ã—ã„é¸æŠ
            event.target.classList.add('selected');
            selectedGrade = grade;
            
            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
            document.getElementById('form-instruction').style.display = 'block';
            document.getElementById('calendar-container').classList.add('show');
            document.getElementById('date-sections-container').classList.add('show');
            document.getElementById('submit-section').classList.add('show');
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«
            document.getElementById('calendar-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // æœˆã‚’å¤‰æ›´ï¼ˆä»Šæ—¥ã‹ã‚‰æ•°ãˆã¦1ãƒ¶æœˆå…ˆã¾ã§ï¼‰
        function changeMonth(direction) {
            const newMonth = new Date(currentMonth);
            newMonth.setMonth(newMonth.getMonth() + direction);
            
            // ä»Šæ—¥ã‹ã‚‰1ãƒ¶æœˆå…ˆã¾ã§ã—ã‹é€²ã‚ãªã„åˆ¶é™ï¼ˆ2ãƒ¶æœˆå…ˆã®1æ—¥ä»¥é™ã¯è¡¨ç¤ºä¸å¯ï¼‰
            const maxDate = new Date(today.getFullYear(), today.getMonth() + 2, 1);
            if (direction === 1 && newMonth >= maxDate) {
                return; // ä»Šæ—¥ã‹ã‚‰1ãƒ¶æœˆå…ˆã‚’è¶…ãˆã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„
            }
            
            currentMonth.setMonth(currentMonth.getMonth() + direction);
            generateCalendar();
        }
        
        // è¨­å®šå€¤ã¯config.jsã‹ã‚‰èª­ã¿è¾¼ã¾ã‚Œã‚‹
        
        // äºˆç´„ã‚’é€ä¿¡
        function submitReservation() {
            if (!selectedSchoolType) {
                alert('å­¦æ ¡åŒºåˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            if (!selectedGrade) {
                alert('å­¦å¹´ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            if (!selectedDate || !selectedTime) {
                alert('æ™‚é–“å¸¯ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            if (!childName || childName.trim() === '') {
                alert('ãŠå­æ§˜ã®ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                document.getElementById('child-name-input').focus();
                return;
            }
            if (!phoneNumber || phoneNumber.trim() === '') {
                alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                document.getElementById('phone-input').focus();
                return;
            }
            
            // é›»è©±ç•ªå·ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (!validateJapanesePhoneNumber(phoneNumber)) {
                alert('æ­£ã—ã„é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\næ—¥æœ¬å›½å†…ã®é›»è©±ç•ªå·ï¼ˆ10æ¡ã¾ãŸã¯11æ¡ã®æ•°å­—ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                document.getElementById('phone-input').focus();
                document.getElementById('phone-input').classList.add('error');
                document.getElementById('phone-error-message').classList.add('show');
                return;
            }
            
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä»»æ„é …ç›®ï¼‰
            if (emailAddress && emailAddress.trim() !== '') {
                if (!validateEmail(emailAddress)) {
                    alert('æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    document.getElementById('email-input').focus();
                    document.getElementById('email-input').classList.add('error');
                    document.getElementById('email-error-message').classList.add('show');
                    return;
                }
            }
            
            // Google Apps ScriptãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€Google Apps Scriptã§é€ä¿¡
            if (CONFIG.GOOGLE_APPS_SCRIPT_URL && CONFIG.GOOGLE_APPS_SCRIPT_URL !== 'YOUR_GOOGLE_APPS_SCRIPT_URL') {
                sendEmailWithGoogleAppsScript();
            } else {
                // Google Apps ScriptãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€mailtoãƒªãƒ³ã‚¯ã‚’ä½¿ç”¨
                sendEmailWithMailto();
            }
        }
        
        // Google Apps Scriptã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡
        function sendEmailWithGoogleAppsScript() {
            // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            const submitButton = document.getElementById('submit-button');
            submitButton.disabled = true;
            submitButton.textContent = 'é€ä¿¡ä¸­...';
            
            // ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
            const emailData = {
                to: CONFIG.EMAIL,
                subject: 'ç„¡æ–™ä½“é¨“äºˆç´„ã®ãŠç”³ã—è¾¼ã¿',
                date: formatDateDisplay(selectedDate),
                time: selectedTime,
                date_raw: selectedDate,
                school_type: selectedSchoolType,
                grade: selectedGrade,
                child_name: childName,
                phone: phoneNumber,
                email: emailAddress || 'æœªå…¥åŠ›',
                message: messageText || 'ãªã—',
                body: `ç„¡æ–™ä½“é¨“äºˆç´„ã®ãŠç”³ã—è¾¼ã¿ãŒã‚ã‚Šã¾ã—ãŸã€‚

ãŠå­æ§˜ã®ãŠåå‰: ${childName}
é›»è©±ç•ªå·: ${phoneNumber}
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: ${emailAddress || 'æœªå…¥åŠ›'}
å­¦æ ¡åŒºåˆ¥: ${selectedSchoolType}
å­¦å¹´: ${selectedGrade}
äºˆç´„å¸Œæœ›æ—¥æ™‚: ${formatDateDisplay(selectedDate)} ${formatTimeDisplay(selectedTime)}
${messageText ? `\nã”è³ªå•ãƒ»ã”è¦æœ›:\n${messageText}` : ''}

äºˆç´„ç¢ºå®šã®ãŸã‚ã€ãŠå®¢æ§˜ã«ã”é€£çµ¡ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚

---
ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰è‡ªå‹•é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚
iTeen æ­¦åº«ä¹‹è˜æ ¡`,
                // è‡ªå‹•å¿œç­”ãƒ¡ãƒ¼ãƒ«ç”¨ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ï¼‰
                replyTo: emailAddress && emailAddress.trim() !== '' && emailAddress !== 'æœªå…¥åŠ›' ? emailAddress.trim() : undefined,
                replySubject: emailAddress && emailAddress.trim() !== '' && emailAddress !== 'æœªå…¥åŠ›' ? 'ã€iTeen æ­¦åº«ä¹‹è˜æ ¡ã€‘ç„¡æ–™ä½“é¨“äºˆç´„ã®ã”ç¢ºèª' : undefined,
                replyBody: emailAddress && emailAddress.trim() !== '' && emailAddress !== 'æœªå…¥åŠ›' ? `${childName} æ§˜

ã“ã®åº¦ã¯ã€iTeen æ­¦åº«ä¹‹è˜æ ¡ã®ç„¡æ–™ä½“é¨“äºˆç´„ã‚’ãŠç”³ã—è¾¼ã¿ã„ãŸã ãã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®å†…å®¹ã§äºˆç´„ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚

ã€äºˆç´„å†…å®¹ã€‘
ãŠå­æ§˜ã®ãŠåå‰: ${childName}
é›»è©±ç•ªå·: ${phoneNumber}
å­¦æ ¡åŒºåˆ¥: ${selectedSchoolType}
å­¦å¹´: ${selectedGrade}
äºˆç´„å¸Œæœ›æ—¥æ™‚: ${formatDateDisplay(selectedDate)} ${formatTimeDisplay(selectedTime)}${messageText && messageText.trim() !== '' ? `\n\nã”è³ªå•ãƒ»ã”è¦æœ›:\n${messageText}` : ''}

ã€å½“æ—¥ã®æµã‚Œã€‘
1. ã”æ¥æ ¡ - æ•™å®¤ã«ã„ã‚‰ã—ã¦ãã ã•ã„ï¼ˆæ‰‹ã¶ã‚‰ã§OKï¼ï¼‰
2. ç°¡å˜ãªã”èª¬æ˜ - æ•™å®¤ã®ã”ç´¹ä»‹ã¨ã€ãŠå­æ§˜ã®èˆˆå‘³ã‚’ãŠèãã—ã¾ã™
3. ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä½“é¨“ - å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’æ¥½ã—ã‚“ã§ã„ãŸã ãã¾ã™
4. ã”è³ªå•ãƒ»ã”ç›¸è«‡ - æ°—ã«ãªã‚‹ã“ã¨ã¯ä½•ã§ã‚‚ãŠèããã ã•ã„

äºˆç´„ç¢ºå®šã®ãŸã‚ã€æ‹…å½“è€…ã‚ˆã‚Šã”é€£çµ¡ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
ãŠæ€¥ãã®å ´åˆã¯ã€ãŠé›»è©±ï¼ˆ${CONFIG.PHONE}ï¼‰ã§ã‚‚ãŠå•ã„åˆã‚ã›ã„ãŸã ã‘ã¾ã™ã€‚

ãŠä¼šã„ã§ãã‚‹ã®ã‚’æ¥½ã—ã¿ã«ã—ã¦ãŠã‚Šã¾ã™ï¼

---
iTeen æ­¦åº«ä¹‹è˜æ ¡
é›»è©±: ${CONFIG.PHONE}
ãƒ¡ãƒ¼ãƒ«: ${CONFIG.EMAIL}` : undefined
            };
            
            // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
            console.log('ğŸ“§ ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ‡ãƒ¼ã‚¿ç¢ºèª:', {
                hasEmail: !!emailAddress,
                emailAddress: emailAddress,
                hasReplyTo: !!emailData.replyTo,
                replyTo: emailData.replyTo,
                hasReplySubject: !!emailData.replySubject,
                hasReplyBody: !!emailData.replyBody
            });
            
            // Google Apps Scriptã®Webã‚¢ãƒ—ãƒªã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
            console.log('ğŸ“¤ Google Apps Scriptã«é€ä¿¡ä¸­...', emailData);
            
            // Google Apps Scriptã¯CORSã‚’å®Œå…¨ã«ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€no-corsãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
            // æ³¨æ„: no-corsãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—ã§ããªã„ãŒã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã¯æˆåŠŸã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
            fetch(CONFIG.GOOGLE_APPS_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // no-corsãƒ¢ãƒ¼ãƒ‰ã§CORSã‚¨ãƒ©ãƒ¼ã‚’å›é¿
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(emailData)
            })
            .then(() => {
                // no-corsãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—ã§ããªã„ãŸã‚ã€å¸¸ã«æˆåŠŸã¨ã—ã¦æ‰±ã†
                // å®Ÿéš›ã«ã¯ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãŒæˆåŠŸã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„
                console.log('âœ… Google Apps Scriptã«é€ä¿¡ã—ã¾ã—ãŸï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯å–å¾—ã§ãã¾ã›ã‚“ãŒã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã¯æˆåŠŸã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼‰');
                // äºˆç´„æƒ…å ±ã‚’æ„Ÿè¬ãƒšãƒ¼ã‚¸ã«è¡¨ç¤º
                showThankYouPage();
            })
            .catch(function(error) {
                // é€ä¿¡å¤±æ•—ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãªã©ï¼‰
                console.error('âŒ Google Apps Scripté€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
                console.error('ã‚¨ãƒ©ãƒ¼è©³ç´°:', {
                    message: error.message,
                    name: error.name,
                    stack: error.stack,
                    url: CONFIG.GOOGLE_APPS_SCRIPT_URL
                });
                
                // ã‚ˆã‚Šè©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                let errorMessage = 'Google Apps Scriptã¸ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\n';
                errorMessage += `ã‚¨ãƒ©ãƒ¼: ${error.message}\n\n`;
                
                // ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡ã«å¿œã˜ãŸå¯¾å‡¦æ³•ã‚’æ¡ˆå†…
                if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
                    errorMessage += 'ã€è€ƒãˆã‚‰ã‚Œã‚‹åŸå› ã€‘\n';
                    errorMessage += '1. Google Apps ScriptãŒWebã‚¢ãƒ—ãƒªã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ãªã„\n';
                    errorMessage += '2. Webã‚¢ãƒ—ãƒªã®ã€Œã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãŒã€Œå…¨å“¡ã€ã«è¨­å®šã•ã‚Œã¦ã„ãªã„\n';
                    errorMessage += '3. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã®å•é¡Œ\n\n';
                    errorMessage += 'ã€å¯¾å‡¦æ–¹æ³•ã€‘\n';
                    errorMessage += 'Google Apps Scriptã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n';
                    errorMessage += 'è©³ç´°ã¯ã€ŒGOOGLE_APPS_SCRIPT_SETUP.mdã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚\n\n';
                }
                
                errorMessage += 'mailtoãƒªãƒ³ã‚¯ã§é€ä¿¡ã—ã¾ã™ã€‚';
                
                alert(errorMessage);
                sendEmailWithMailto();
                
                submitButton.disabled = false;
                submitButton.textContent = 'äºˆç´„ã‚’ç¢ºå®šã™ã‚‹';
            });
        }
        
        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
        function resetForm() {
            selectedDate = null;
            selectedTime = null;
            selectedSchoolType = null;
            selectedGrade = null;
            childName = '';
            phoneNumber = '';
            emailAddress = '';
            messageText = '';
            document.querySelectorAll('.calendar-day.selected').forEach(day => {
                day.classList.remove('selected');
            });
            document.querySelectorAll('.time-slot.selected').forEach(slot => {
                slot.classList.remove('selected');
                slot.classList.add('available');
            });
            document.querySelectorAll('.grade-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.school-type-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.getElementById('selected-info').classList.remove('show');
            document.querySelectorAll('.date-section').forEach(section => {
                section.classList.remove('show');
            });
            // å­ä¾›ã®åå‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('child-name-input').value = '';
            document.getElementById('child-name-section').classList.remove('show');
            // é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('phone-input').value = '';
            document.getElementById('phone-section').classList.remove('show');
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('email-input').value = '';
            document.getElementById('email-section').classList.remove('show');
            // è‡ªç”±è¨˜è¿°æ¬„ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('message-textarea').value = '';
            document.getElementById('message-section').classList.remove('show');
            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ãƒ•ã‚©ãƒ¼ãƒ ã‚’éè¡¨ç¤ºã«æˆ»ã™
            document.getElementById('form-instruction').style.display = 'none';
            document.getElementById('calendar-container').classList.remove('show');
            document.getElementById('date-sections-container').classList.remove('show');
            document.getElementById('submit-section').classList.remove('show');
            document.getElementById('grade-selection-section').classList.remove('show');
        }
        
        // æ„Ÿè¬ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
        function showThankYouPage() {
            // äºˆç´„æƒ…å ±ã‚’è¡¨ç¤º
            document.getElementById('reservation-date-item').textContent = `æ—¥ä»˜: ${formatDateDisplay(selectedDate)}`;
            document.getElementById('reservation-time-item').textContent = `æ™‚é–“: ${formatTimeDisplay(selectedTime)}`;
            document.getElementById('reservation-name-item').textContent = `ãŠåå‰: ${childName}æ§˜`;
            
            // é›»è©±ç•ªå·ã‚’è¡¨ç¤º
            const phoneItem = document.getElementById('reservation-phone-item');
            if (phoneNumber && phoneNumber.trim() !== '') {
                phoneItem.textContent = `é›»è©±ç•ªå·: ${phoneNumber}`;
                phoneItem.style.display = 'block';
            } else {
                phoneItem.style.display = 'none';
            }
            
            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¡¨ç¤ºï¼ˆå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ï¼‰
            const emailItem = document.getElementById('reservation-email-item');
            if (emailAddress && emailAddress.trim() !== '') {
                emailItem.textContent = `ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: ${emailAddress}`;
                emailItem.style.display = 'block';
            } else {
                emailItem.style.display = 'none';
            }
            
            // è‡ªç”±è¨˜è¿°æ¬„ã‚’è¡¨ç¤ºï¼ˆå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ï¼‰
            const messageItem = document.getElementById('reservation-message-item');
            if (messageText && messageText.trim() !== '') {
                messageItem.innerHTML = `<div style="margin-top: 10px;"><strong>ã”è³ªå•ãƒ»ã”è¦æœ›:</strong><br><div style="margin-top: 5px; white-space: pre-wrap; text-align: left;">${messageText}</div></div>`;
                messageItem.style.display = 'block';
            } else {
                messageItem.style.display = 'none';
            }
            
            // ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¨å…ƒã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ã‚’éè¡¨ç¤º
            document.querySelector('.reservation-section').style.display = 'none';
            const originalHeader = document.querySelector('header:not(.thank-you-header)');
            const originalFooter = document.querySelector('footer:not(.thank-you-footer)');
            if (originalHeader) originalHeader.style.display = 'none';
            if (originalFooter) originalFooter.style.display = 'none';
            
            // æ„Ÿè¬ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
            document.getElementById('thank-you-section').classList.add('show');
            
            // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // mailtoãƒªãƒ³ã‚¯ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
        function sendEmailWithMailto() {
            const subject = encodeURIComponent('ç„¡æ–™ä½“é¨“äºˆç´„ã®ãŠç”³ã—è¾¼ã¿');
            const body = encodeURIComponent(
                `ç„¡æ–™ä½“é¨“äºˆç´„ã®ãŠç”³ã—è¾¼ã¿\n\n` +
                `ãŠå­æ§˜ã®ãŠåå‰: ${childName}\n` +
                `é›»è©±ç•ªå·: ${phoneNumber}\n` +
                `ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: ${emailAddress || 'æœªå…¥åŠ›'}\n` +
                `å­¦æ ¡åŒºåˆ¥: ${selectedSchoolType}\n` +
                `å­¦å¹´: ${selectedGrade}\n` +
                `äºˆç´„å¸Œæœ›æ—¥æ™‚: ${formatDateDisplay(selectedDate)} ${formatTimeDisplay(selectedTime)}\n` +
                `${messageText && messageText.trim() !== '' ? `\nã”è³ªå•ãƒ»ã”è¦æœ›:\n${messageText}\n` : ''}\n` +
                `äºˆç´„ç¢ºå®šã®ãŸã‚ã€ãŠå®¢æ§˜ã«ã”é€£çµ¡ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚\n\n` +
                `---\n` +
                `ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰è‡ªå‹•é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚\n` +
                `iTeen æ­¦åº«ä¹‹è˜æ ¡`
            );
            
            const mailtoLink = `mailto:${CONFIG.EMAIL}?subject=${subject}&body=${body}`;
            window.location.href = mailtoLink;
            
            setTimeout(() => {
                // ãƒ¡ãƒ¼ãƒ«é€ä¿¡å¾Œã€æ„Ÿè¬ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
                showThankYouPage();
            }, 1000);
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯å­¦å¹´é¸æŠå¾Œã«è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€ã“ã“ã§ã¯ç”Ÿæˆã®ã¿ï¼ˆéè¡¨ç¤ºã®ã¾ã¾ï¼‰
        generateCalendar();
        
        // åˆæœŸçŠ¶æ…‹ã§ã¯ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ãƒ•ã‚©ãƒ¼ãƒ ã‚’éè¡¨ç¤º
        document.getElementById('calendar-container').classList.remove('show');
        document.getElementById('date-sections-container').classList.remove('show');
        document.getElementById('submit-section').classList.remove('show');
        
        // Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰äºˆç´„æ¸ˆã¿æ—¥æ™‚ã‚’å–å¾—
        updateUnavailableTimes();
        
        // å®šæœŸçš„ã«æ›´æ–°ã™ã‚‹å ´åˆï¼ˆ5åˆ†ã”ã¨ï¼‰- å¿…è¦ã«å¿œã˜ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã™
        // setInterval(updateUnavailableTimes, 5 * 60 * 1000);
        
        // è¨­å®šå€¤ã‚’ãƒšãƒ¼ã‚¸ã«åæ˜ 
        function initializeConfig() {
            // ãƒ˜ãƒƒãƒ€ãƒ¼ã®é›»è©±ç•ªå·ãƒªãƒ³ã‚¯
            const headerPhoneLink = document.getElementById('header-phone-link');
            if (headerPhoneLink) {
                headerPhoneLink.href = `tel:${CONFIG.PHONE}`;
                headerPhoneLink.textContent = `â˜${CONFIG.PHONE}`;
            }
            
            // æ„Ÿè¬ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ã®é›»è©±ç•ªå·ãƒªãƒ³ã‚¯
            const thankYouHeaderPhoneLink = document.getElementById('thank-you-header-phone-link');
            if (thankYouHeaderPhoneLink) {
                thankYouHeaderPhoneLink.href = `tel:${CONFIG.PHONE}`;
                thankYouHeaderPhoneLink.textContent = `â˜${CONFIG.PHONE}`;
            }
            
            // æ„Ÿè¬ãƒšãƒ¼ã‚¸ã®é›»è©±ç•ªå·ãƒªãƒ³ã‚¯
            const thankYouPhoneLink = document.getElementById('thank-you-phone-link');
            if (thankYouPhoneLink) {
                thankYouPhoneLink.href = `tel:${CONFIG.PHONE}`;
                thankYouPhoneLink.textContent = `ğŸ“ ãŠå•ã„åˆã‚ã›: ${CONFIG.PHONE}`;
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è¨­å®šå€¤ã‚’åæ˜ 
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeConfig);
        } else {
            initializeConfig();
        }
    </script>
</body>
</html>
